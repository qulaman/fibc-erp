# üîß –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ register_extrusion_output

## –ü—Ä–æ–±–ª–µ–º–∞
–§—É–Ω–∫—Ü–∏—è `register_extrusion_output` –ø—ã—Ç–∞–ª–∞—Å—å –∑–∞–ø–∏—Å–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ç–∞–±–ª–∏—Ü—É `yarn_warehouse`,
—Ö–æ—Ç—è –≤ –±–∞–∑–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–∞–±–ª–∏—Ü–∞ `yarn_inventory`.

## –†–µ—à–µ–Ω–∏–µ
–û–±–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, —á—Ç–æ–±—ã –æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ `yarn_inventory`.

## –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Supabase SQL Editor (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Supabase Dashboard**: https://supabase.com/dashboard/project/mgslapkswztsonyooogm
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor**
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª:
   `supabase/migrations/20250209_fix_register_extrusion_to_use_yarn_inventory.sql`
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –í–°–Å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
5. –í—Å—Ç–∞–≤—å—Ç–µ –≤ SQL Editor
6. –ù–∞–∂–º–∏—Ç–µ **RUN** (–∏–ª–∏ Ctrl+Enter)
7. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ: **Success. No rows returned**

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ psql (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω PostgreSQL client)

```bash
# –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –µ—ë
Get-Content "supabase\migrations\20250209_fix_register_extrusion_to_use_yarn_inventory.sql" | psql "postgresql://postgres.mgslapkswztsonyooogm:Qq6391463!@db.mgslapkswztsonyooogm.supabase.co:5432/postgres"
```

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—Å—è –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

–§—É–Ω–∫—Ü–∏—è `register_extrusion_output` –±—É–¥–µ—Ç:
- ‚úÖ –ó–∞–ø–∏—Å—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –≤ `production_extrusion`
- ‚úÖ –î–æ–±–∞–≤–ª—è—Ç—å –Ω–∏—Ç—å –Ω–∞ —Å–∫–ª–∞–¥ –≤ —Ç–∞–±–ª–∏—Ü—É `yarn_inventory` (–≤–º–µ—Å—Ç–æ yarn_warehouse)
- ‚úÖ –û–±–Ω–æ–≤–ª—è—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –µ—Å–ª–∏ –ø–∞—Ä—Ç–∏—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞—Ç—å JSON —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º: `{success: true, production_id: "...", ...}`

## –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —ç–∫—Å—Ç—Ä—É–∑–∏–∏: http://localhost:3000/production/extrusion
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∏ –Ω–∞–∂–º–∏—Ç–µ **–í—ã–ø—É—Å—Ç–∏—Ç—å –ü–∞—Ä—Ç–∏—é**
3. –ó–∞–ø–∏—Å—å –¥–æ–ª–∂–Ω–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è ‚úÖ
4. –û—Ç–∫—Ä–æ–π—Ç–µ **–ñ—É—Ä–Ω–∞–ª –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞** - –∑–∞–ø–∏—Å—å –¥–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è ‚úÖ
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É `yarn_inventory` - –ø–∞—Ä—Ç–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∞ —Å–∫–ª–∞–¥–µ ‚úÖ

## –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å –≤ SQL Editor:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π
SELECT * FROM production_extrusion ORDER BY created_at DESC LIMIT 5;
SELECT * FROM yarn_inventory ORDER BY last_updated DESC LIMIT 5;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏
SELECT routine_name, routine_definition
FROM information_schema.routines
WHERE routine_name = 'register_extrusion_output';
```
