# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–¥—É–ª—è "–û—Ç–ø—É—Å–∫ –≥–æ—Ç–æ–≤–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏"

## –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–¢–∞–±–ª–∏—Ü–∞**: `finished_goods_shipments` - –∂—É—Ä–Ω–∞–ª –æ—Ç–ø—É—Å–∫–æ–≤ –≥–æ—Ç–æ–≤–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏
- **–§—É–Ω–∫—Ü–∏—è**: `generate_shipment_number()` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–º–µ—Ä–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (OTP-YYYYMMDD-NNNN)
- **VIEW**: `shipments_statistics` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ—Ç–ø—É—Å–∫–∞–º
- **VIEW**: `finished_goods_balance_with_shipments` - –æ—Å—Ç–∞—Ç–∫–∏ —Å —É—á–µ—Ç–æ–º –æ—Ç–ø—É—Å–∫–æ–≤
- **–¢—Ä–∏–≥–≥–µ—Ä**: –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `updated_at`

### 2. –°—Ç—Ä–∞–Ω–∏—Ü—ã
- **[/warehouse/finished-goods/shipment](app/warehouse/finished-goods/shipment/page.tsx)** - —Ñ–æ—Ä–º–∞ –æ—Ç–ø—É—Å–∫–∞ –ì–ü
- **[/warehouse/finished-goods/shipment/history](app/warehouse/finished-goods/shipment/history/page.tsx)** - –∂—É—Ä–Ω–∞–ª –æ—Ç–ø—É—Å–∫–æ–≤

### 3. –ù–∞–≤–∏–≥–∞—Ü–∏—è
–î–æ–±–∞–≤–ª–µ–Ω—ã –ø—É–Ω–∫—Ç—ã –≤ —Ä–∞–∑–¥–µ–ª "–°–∫–ª–∞–¥":
- –û—Ç–ø—É—Å–∫ –ì–ü –∫–ª–∏–µ–Ω—Ç–∞–º
- –ñ—É—Ä–Ω–∞–ª –æ—Ç–ø—É—Å–∫–æ–≤

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

**–ß–µ—Ä–µ–∑ Supabase Dashboard:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ [Supabase Dashboard](https://supabase.com/dashboard)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor**
4. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `supabase/migrations/20250219_finished_goods_shipments.sql`
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å SQL –∫–æ–¥
6. –í—Å—Ç–∞–≤—å—Ç–µ –≤ SQL Editor
7. –ù–∞–∂–º–∏—Ç–µ **Run** –∏–ª–∏ **Ctrl+Enter**

**–ò–ª–∏ —á–µ—Ä–µ–∑ CLI:**
```bash
supabase db push
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ SQL Editor:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü—ã
SELECT * FROM finished_goods_shipments LIMIT 1;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ–º–µ—Ä–∞
SELECT generate_shipment_number();

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ VIEW
SELECT * FROM shipments_statistics;
SELECT * FROM finished_goods_balance_with_shipments;
```

---

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –§–æ—Ä–º–∞ –æ—Ç–ø—É—Å–∫–∞ (/warehouse/finished-goods/shipment)

**–ü–æ–ª—è:**
- üìÖ –î–∞—Ç–∞ –æ—Ç–ø—É—Å–∫–∞
- üè¢ –ö–ª–∏–µ–Ω—Ç (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
- üë§ –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ª–∏—Ü–æ
- üë∑ –ö–ª–∞–¥–æ–≤—â–∏–∫ (–∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ employees —Å —Ä–æ–ª—å—é 'warehouse')
- üì¶ –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ)
- üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª–∏–µ–Ω—Ç–µ –∏ –¥–∞—Ç–µ
2. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã (–∫–Ω–æ–ø–∫–∞ "+ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä")
3. –£–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
4. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Å—Ç–∞—Ç–∫–∏
5. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Å—Ç–∏ –æ—Ç–ø—É—Å–∫"

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–∏:**
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞ (OTP-20250219-0001)
- –°–æ–∑–¥–∞—é—Ç—Å—è –∑–∞–ø–∏—Å–∏ –≤ `finished_goods_shipments`
- –°–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Ç–æ–≤–∞—Ä—ã —Å–æ —Å–∫–ª–∞–¥–∞ `finished_goods_warehouse` –ø–æ –º–µ—Ç–æ–¥—É FIFO
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è toast —Å —É—Å–ø–µ—à–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º

### –ñ—É—Ä–Ω–∞–ª –æ—Ç–ø—É—Å–∫–æ–≤ (/warehouse/finished-goods/shipment/history)

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –≤—Å–µ–≥–æ –æ—Ç–ø—É—Å–∫–æ–≤, –æ—Ç–ø—É—â–µ–Ω–æ –µ–¥–∏–Ω–∏—Ü, –∫–ª–∏–µ–Ω—Ç–æ–≤, —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏—Ö –æ—Ç–ø—É—Å–∫–æ–≤
- üîç –§–∏–ª—å—Ç—Ä—ã:
  - –ü–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∫–ª–∏–µ–Ω—Ç—É, —Ç–æ–≤–∞—Ä—É
  - –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ (–æ—Ç - –¥–æ)
  - –§–∏–ª—å—Ç—Ä –ø–æ –∫–ª–∏–µ–Ω—Ç—É
- üìã –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:
  - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –Ω–æ–º–µ—Ä—É –¥–æ–∫—É–º–µ–Ω—Ç–∞
  - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ
  - –°—Ç–∞—Ç—É—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞
  - –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**
- –î–æ–∫—É–º–µ–Ω—Ç—ã –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)
- –ö–∞–∂–¥—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
  - –ù–æ–º–µ—Ä –∏ –¥–∞—Ç—É
  - –ö–ª–∏–µ–Ω—Ç–∞ –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∑–∏—Ü–∏–π –∏ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
  - –î–µ—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤

---

## –î–∏–∑–∞–π–Ω

–ú–æ–¥—É–ª—å –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ –∏–∑—É–º—Ä—É–¥–Ω–æ-–∑–µ–ª–µ–Ω–æ–π —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º–µ:
- üü¢ –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (emerald ‚Üí green)
- ‚ö†Ô∏è –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π —Å —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–º
- ‚úÖ –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–ü—Ä–æ–≤–µ—Å—Ç–∏ –æ—Ç–ø—É—Å–∫"
- üìä –ö—Ä–∞—Å–∏–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –∏–∫–æ–Ω–∫–∞–º–∏
- üé® –ö–∞—Ä—Ç–æ—á–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã

```sql
finished_goods_shipments (
  id UUID PRIMARY KEY,
  shipment_number TEXT UNIQUE,        -- OTP-YYYYMMDD-NNNN
  shipment_date DATE,
  client_name TEXT,
  responsible_person TEXT,
  employee_id UUID ‚Üí employees(id),
  product_code TEXT,
  product_name TEXT,
  product_type TEXT,
  quantity INTEGER,
  notes TEXT,
  status TEXT,                        -- '–ü—Ä–æ–≤–µ–¥–µ–Ω–æ', '–ß–µ—Ä–Ω–æ–≤–∏–∫', '–û—Ç–º–µ–Ω—ë–Ω'
  created_at TIMESTAMP,
  updated_at TIMESTAMP
)
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞—Ç—å –æ—Ç–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç—É

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **–°–∫–ª–∞–¥ ‚Üí –û—Ç–ø—É—Å–∫ –ì–ü –∫–ª–∏–µ–Ω—Ç–∞–º**
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - –ö–ª–∏–µ–Ω—Ç: "–û–û–û –ü–æ–ª–∏–º–µ—Ä"
   - –î–∞—Ç–∞: —Å–µ–≥–æ–¥–Ω—è
   - –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π: "–ò–≤–∞–Ω–æ–≤ –ò.–ò."
3. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã:
   - –ë–∏–≥-–ë—ç–≥ 1000–∫–≥ ‚Üí 50 —à—Ç
   - –í–∫–ª–∞–¥—ã—à 1000–ª ‚Üí 30 —à—Ç
4. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Å—Ç–∏ –æ—Ç–ø—É—Å–∫"
5. –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–º–µ—Ä: OTP-20250219-0001

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **–°–∫–ª–∞–¥ ‚Üí –ñ—É—Ä–Ω–∞–ª –æ—Ç–ø—É—Å–∫–æ–≤**
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã:
   - –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –≤ –ø–æ–∏—Å–∫
   - –£–∫–∞–∂–∏—Ç–µ –ø–µ—Ä–∏–æ–¥ –¥–∞—Ç
3. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (–Ω–µ –±–æ–ª—å—à–µ –æ—Å—Ç–∞—Ç–∫–∞)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
- ‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ FIFO —Å–ø–∏—Å–∞–Ω–∏–µ (—Å—Ç–∞—Ä—ã–µ –ø–∞—Ä—Ç–∏–∏ –ø–µ—Ä–≤—ã–º–∏)
- ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

---

## –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–±—É–¥—É—â–µ–µ)

- [ ] –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ (—Ç–∞–±–ª–∏—Ü–∞ `clients`)
- [ ] –ü–µ—á–∞—Ç—å –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
- [ ] –û—Ç–º–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (—Å—Ç–æ—Ä–Ω–æ)
- [ ] –ß–µ—Ä–Ω–æ–≤–∏–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- [ ] –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å
- [ ] –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç–∞
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 1C

---

## –ì–æ—Ç–æ–≤–æ! üéâ

–ú–æ–¥—É–ª—å –æ—Ç–ø—É—Å–∫–∞ –≥–æ—Ç–æ–≤–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.
