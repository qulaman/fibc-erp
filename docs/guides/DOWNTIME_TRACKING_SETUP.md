# üö® –£—á–µ—Ç –ø—Ä–æ—Å—Ç–æ–µ–≤ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è

## –ß—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ:

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–¢–∞–±–ª–∏—Ü–∞ `production_downtimes`** - —É—á–µ—Ç –≤—Å–µ—Ö –ø—Ä–æ—Å—Ç–æ–µ–≤
  - –ï–¥–∏–Ω–∞—è –¥–ª—è –≤—Å–µ—Ö —Ü–µ—Ö–æ–≤ (—ç–∫—Å—Ç—Ä—É–∑–∏—è, —Ç–∫–∞—á–µ—Å—Ç–≤–æ, –ª–∞–º–∏–Ω–∞—Ü–∏—è, —Å—Ç—Ä–æ–ø, –∫—Ä–æ–π–∫–∞, —à–≤–µ–π–Ω—ã–π)
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ –º–∏–Ω—É—Ç–∞—Ö
  - –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—é –∏ —Å–º–µ–Ω–µ

- **–¢–∞–±–ª–∏—Ü–∞ `downtime_reasons`** - —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø—Ä–∏—á–∏–Ω –ø—Ä–æ—Å—Ç–æ–µ–≤
  - –û–±—Ä—ã–≤ –Ω–∏—Ç–∏
  - –ü–æ–ª–æ–º–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
  - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—ã—Ä—å—è
  - –°–º–µ–Ω–∞ –ø–∞—Ä—Ç–∏–∏/—Ä–µ—Ü–µ–ø—Ç—É—Ä—ã
  - –ü–ª–∞–Ω–æ–≤–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
  - –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞
  - –ü–µ—Ä–µ—Ä—ã–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
  - –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏–∏
  - –î—Ä—É–≥–æ–µ

- **View `downtimes_with_equipment`** - —É–¥–æ–±–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤

### 2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç DowntimeDialog
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ—è
- –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –ø—Ä–∏—á–∏–Ω

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —ç–∫—Å—Ç—Ä—É–∑–∏–µ–π
- –ö–Ω–æ–ø–∫–∞ "üö® –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π" –≤ —à–∞–ø–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ü–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –º–∞—à–∏–Ω—ã
- –ü–µ—Ä–µ–¥–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç (–º–∞—à–∏–Ω–∞, —Å–º–µ–Ω–∞, –¥–∞—Ç–∞)

## üìã –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å:

### –®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –ë–î
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ Supabase SQL Editor
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞:
supabase/migrations/20250209_create_production_downtimes.sql
# –í—Å—Ç–∞–≤—å—Ç–µ –∏ –Ω–∞–∂–º–∏—Ç–µ RUN
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —ç–∫—Å—Ç—Ä—É–∑–∏–∏
2. –í—ã–±–µ—Ä–∏—Ç–µ –º–∞—à–∏–Ω—É (–ª–∏–Ω–∏—é)
3. –ü–æ—è–≤–∏—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "üö® –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π"
4. –ù–∞–∂–º–∏—Ç–µ ‚Üí –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
5. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ (–∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ)
   - –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è (–∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ)
   - –ü—Ä–∏—á–∏–Ω–∞ (–≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫)
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
6. –ù–∞–∂–º–∏—Ç–µ "–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å"

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```
–û–ø–µ—Ä–∞—Ç–æ—Ä ‚Üí –ö–Ω–æ–ø–∫–∞ "–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π" ‚Üí
‚Üí –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ ‚Üí –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ‚Üí
‚Üí –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –º–∏–Ω—É—Ç
```

## üìä –ß—Ç–æ –¥–∞–ª—å—à–µ:

### –í –¥–µ—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ —Å–º–µ–Ω—ã (ExtrusionDetailsDialog)
–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü—Ä–æ—Å—Ç–æ–∏ –ª–∏–Ω–∏–∏ (45 –º–∏–Ω—É—Ç)          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚è±Ô∏è 14:30-14:45 (15 –º–∏–Ω)           ‚îÇ
‚îÇ    –ü—Ä–∏—á–∏–Ω–∞: –û–±—Ä—ã–≤ –Ω–∏—Ç–∏             ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ ‚è±Ô∏è 16:00-16:30 (30 –º–∏–Ω)           ‚îÇ
‚îÇ    –ü—Ä–∏—á–∏–Ω–∞: –°–º–µ–Ω–∞ –ø–∞—Ä—Ç–∏–∏           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ—Å—Ç–æ–µ–≤ (–±—É–¥—É—â–µ–µ)
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/production/analytics/downtimes`
- –ì—Ä–∞—Ñ–∏–∫–∏ –ø–æ –ø—Ä–∏—á–∏–Ω–∞–º
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É —Ü–µ—Ö–∞–º–∏
- –¢–æ–ø –ø—Ä–∏—á–∏–Ω –ø—Ä–æ—Å—Ç–æ–µ–≤
- –î–∏–Ω–∞–º–∏–∫–∞ –ø–æ –¥–Ω—è–º/–Ω–µ–¥–µ–ª—è–º

## üîß –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –≤ –¥—Ä—É–≥–∏–µ —Ü–µ—Ö–∞:

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–¥—Ö–æ–¥ –∏–∑ —ç–∫—Å—Ç—Ä—É–∑–∏–∏:

```tsx
// 1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
import DowntimeDialog from "@/components/DowntimeDialog";

// 2. –î–æ–±–∞–≤—å—Ç–µ –∫–Ω–æ–ø–∫—É –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫
{formData.machine_id && (
  <DowntimeDialog
    machineId={formData.machine_id}
    machineName={machines.find(m => m.id === formData.machine_id)?.name}
    shift={formData.shift}
    date={formData.date}
  />
)}
```

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

1. **–ë—ã—Å—Ç—Ä–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** - 3 –∫–ª–∏–∫–∞ –≤–º–µ—Å—Ç–æ –±—É–º–∞–∂–Ω—ã—Ö –∂—É—Ä–Ω–∞–ª–æ–≤
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç** - –Ω–µ –Ω—É–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å –º–∏–Ω—É—Ç—ã –≤—Ä—É—á–Ω—É—é
3. **–ï–¥–∏–Ω–∞—è –±–∞–∑–∞** - –≤—Å–µ –ø—Ä–æ—Å—Ç–æ–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
4. **–ì–æ—Ç–æ–≤–æ –∫ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ** - –º–æ–∂–Ω–æ —Å—Ç—Ä–æ–∏—Ç—å –æ—Ç—á–µ—Ç—ã
5. **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ** - —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Ü–µ—Ö–æ–≤

## üìå –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ —ç–∫—Å—Ç—Ä—É–∑–∏–∏
3. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–µ–≤ –≤ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ —Å–º–µ–Ω—ã
4. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –≤ –¥—Ä—É–≥–∏–µ —Ü–µ—Ö–∞ (—Ç–∫–∞—á–µ—Å—Ç–≤–æ, –ª–∞–º–∏–Ω–∞—Ü–∏—è, –∏ —Ç.–¥.)
5. ‚è≥ –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø—Ä–æ—Å—Ç–æ–µ–≤

–ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ! üéâ
