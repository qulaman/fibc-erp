# –ú–æ–¥—É–ª—å –¢–∫–∞—á–µ—Å—Ç–≤–∞ - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

## ‚úÖ –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ

### 1. **SQL –°—Ö–µ–º–∞** ([weaving-schema.sql](supabase/weaving-schema.sql))
- –¢–∞–±–ª–∏—Ü–∞ `fabric_types` - —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–∫–∞–Ω–µ–π
- –¢–∞–±–ª–∏—Ü–∞ `production_weaving` - –∂—É—Ä–Ω–∞–ª –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
- –¢–∞–±–ª–∏—Ü–∞ `fabric_inventory` - —Å–∫–ª–∞–¥—Å–∫–æ–π —É—á–µ—Ç —Ç–∫–∞–Ω–∏
- –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
- –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –æ—Å—Ç–∞—Ç–∫–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–µ

### 2. **–°—Ç—Ä–∞–Ω–∏—Ü—ã Next.js**
- [/production/weaving](app/production/weaving/page.tsx) - –ñ—É—Ä–Ω–∞–ª —Ç–∫–∞—á–µ—Å—Ç–≤–∞
- [/production/weaving/history](app/production/weaving/history/page.tsx) - –ò—Å—Ç–æ—Ä–∏—è —Å–º–µ–Ω
- [/warehouse/fabric](app/warehouse/fabric/page.tsx) - –°–∫–ª–∞–¥ —Ç–∫–∞–Ω–∏

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—É–Ω–∫—Ç—ã –º–µ–Ω—é –¥–ª—è —Ç–∫–∞—á–µ—Å—Ç–≤–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ–±—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É ERP

---

## üìã –®–∞–≥–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –≤ Supabase

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Supabase Dashboard** ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `supabase/weaving-schema.sql`
4. –í—Å—Ç–∞–≤—å—Ç–µ –≤ SQL —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏ –Ω–∞–∂–º–∏—Ç–µ **Run**

### –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### 2.1 –î–æ–±–∞–≤—å—Ç–µ —Å—Ç–∞–Ω–∫–∏ —Ç–∫–∞—á–µ—Å—Ç–≤–∞ –≤ —Ç–∞–±–ª–∏—Ü—É `equipment`:

```sql
INSERT INTO equipment (name, inventory_number, type, status) VALUES
('–¢–∫–∞—Ü–∫–∏–π —Å—Ç–∞–Ω–æ–∫ #1', 'TK-001', 'weaving', '–†–∞–±–æ—Ç–∞–µ—Ç'),
('–¢–∫–∞—Ü–∫–∏–π —Å—Ç–∞–Ω–æ–∫ #2', 'TK-002', 'weaving', '–†–∞–±–æ—Ç–∞–µ—Ç');
```

#### 2.2 –î–æ–±–∞–≤—å—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Ç–∫–∞—á–µ—Å—Ç–≤–∞ –≤ —Ç–∞–±–ª–∏—Ü—É `employees`:

```sql
INSERT INTO employees (full_name, position, department, role, is_active) VALUES
('–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω', '–¢–∫–∞—á', '–¢–∫–∞—á–µ—Å—Ç–≤–æ', 'operator', true),
('–ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä', '–¢–∫–∞—á', '–¢–∫–∞—á–µ—Å—Ç–≤–æ', 'operator', true);
```

#### 2.3 –î–æ–±–∞–≤—å—Ç–µ —Ç–∏–ø—ã —Ç–∫–∞–Ω–µ–π –≤ `fabric_types`:

```sql
INSERT INTO fabric_types (
  code,
  name,
  width_cm,
  density,
  color,
  weft_yarn_code,
  warp_yarn_code,
  weft_consumption_per_meter,
  warp_consumption_per_meter,
  status
) VALUES
(
  'FABRIC-001',
  '–¢–∫–∞–Ω—å –ø–æ–ª–∏–ø—Ä–æ–ø–∏–ª–µ–Ω–æ–≤–∞—è –±–µ–ª–∞—è',
  105,
  120,
  '–ë–µ–ª—ã–π',
  'PP-800D',  -- –ö–æ–¥ –Ω–∏—Ç–∏ —É—Ç–∫–∞ (–¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ yarn_types)
  'PP-800D',  -- –ö–æ–¥ –Ω–∏—Ç–∏ –æ—Å–Ω–æ–≤—ã
  0.085,      -- –†–∞—Å—Ö–æ–¥ —É—Ç–∫–∞: 85 –≥—Ä–∞–º–º –Ω–∞ –º–µ—Ç—Ä (0.085 –∫–≥/–º)
  0.065,      -- –†–∞—Å—Ö–æ–¥ –æ—Å–Ω–æ–≤—ã: 65 –≥—Ä–∞–º–º –Ω–∞ –º–µ—Ç—Ä (0.065 –∫–≥/–º)
  '–ê–∫—Ç–∏–≤–Ω–æ'
);
```

**–í–ê–ñ–ù–û:** –ö–æ–¥—ã –Ω–∏—Ç–∏ (`weft_yarn_code`, `warp_yarn_code`) –¥–æ–ª–∂–Ω—ã —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Ç–∞–±–ª–∏—Ü–µ `yarn_types` –∏–∑ –º–æ–¥—É–ª—è —ç–∫—Å—Ç—Ä—É–∑–∏–∏!

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä: `npm run dev`
2. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: `http://localhost:3000`
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ ‚Üí –¢–∫–∞—á–µ—Å—Ç–≤–æ**
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ:
   - –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å—Ç–∞–Ω–∫–∏
   - –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã
   - –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–∏–ø—ã —Ç–∫–∞–Ω–µ–π
   - –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–º–µ–Ω—É

---

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–æ–¥—É–ª—å

### –ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–º–µ–Ω—ã:**
   - –í—ã–±–æ—Ä –¥–∞—Ç—ã, —Å–º–µ–Ω—ã, —Å—Ç–∞–Ω–∫–∞, –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
   - –í—ã–±–æ—Ä –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ–π —Ç–∫–∞–Ω–∏
   - –í—ã–±–æ—Ä –ø–∞—Ä—Ç–∏–π –Ω–∏—Ç–∏ (—É—Ç–æ–∫ –∏ –æ—Å–Ω–æ–≤–∞)

2. **–£—á–µ—Ç —Ä—É–ª–æ–Ω–æ–≤:**
   - **–†—É–ª–æ–Ω "–í —Ä–∞–±–æ—Ç–µ"** - –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤ —Å–ª–µ–¥—É—é—â–µ–π —Å–º–µ–Ω–µ
   - **–†—É–ª–æ–Ω "–ó–∞–≤–µ—Ä—à–µ–Ω"** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–∏—Ö–æ–¥—É–µ—Ç—Å—è –Ω–∞ —Å–∫–ª–∞–¥

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç:**
   - –†–∞—Å—Ö–æ–¥ –Ω–∏—Ç–∏ = –î–ª–∏–Ω–∞ —Ç–∫–∞–Ω–∏ √ó –ù–æ—Ä–º–∞ —Ä–∞—Å—Ö–æ–¥–∞
   - –°–ø–∏—Å–∞–Ω–∏–µ –Ω–∏—Ç–∏ —Å–æ —Å–∫–ª–∞–¥–∞ —ç–∫—Å—Ç—Ä—É–∑–∏–∏
   - –û–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏–µ —Ç–∫–∞–Ω–∏ –Ω–∞ —Å–∫–ª–∞–¥

4. **–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä—É–ª–æ–Ω–∞:**
   - –ù–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —Ä—É–ª–æ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –±–ª–æ–∫–µ
   - –ü—Ä–∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–∏ –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –ø–∞—Ä—Ç–∏–∏ –Ω–∏—Ç–∏
   - –ù–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –æ–±—â–∏–µ –¥–ª–∏–Ω–∞ –∏ –≤–µ—Å
   - –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å –≤—Å–µ–π —Ü–µ–ø–æ—á–∫–∏

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–¥—É–ª–µ–º —ç–∫—Å—Ç—Ä—É–∑–∏–∏

- **–°–ø–∏—Å–∞–Ω–∏–µ –Ω–∏—Ç–∏:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `consume_yarn_for_weaving`
- **–ü–∞—Ä—Ç–∏–π–Ω—ã–π —É—á–µ—Ç:** –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–∞—Ä—Ç–∏–∏ –∏–∑ `yarn_inventory`
- **–û—Å—Ç–∞—Ç–∫–∏:** –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –±–∞–ª–∞–Ω—Å—ã –ø–æ –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏–∏

---

## üìä –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### SQL –§—É–Ω–∫—Ü–∏–∏

1. **`add_fabric_to_inventory`** - –û–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏–µ —Ä—É–ª–æ–Ω–∞ –Ω–∞ —Å–∫–ª–∞–¥
2. **`consume_yarn_for_weaving`** - –°–ø–∏—Å–∞–Ω–∏–µ –Ω–∏—Ç–∏ –¥–ª—è —Ç–∫–∞—á–µ—Å—Ç–≤–∞

### –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

1. **`fabric_stock_balance`** - –û—Å—Ç–∞—Ç–∫–∏ —Ç–∫–∞–Ω–∏ –ø–æ —Ç–∏–ø–∞–º (–ø—Ä–∏—Ö–æ–¥/—Ä–∞—Å—Ö–æ–¥/–±–∞–ª–∞–Ω—Å)

---

## üé® UI –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞:** –§–∏–æ–ª–µ—Ç–æ–≤—ã–π (purple) - –∫–∞–∫ –æ—Ç–ª–∏—á–∏–µ –æ—Ç —ç–∫—Å—Ç—Ä—É–∑–∏–∏ (–∫—Ä–∞—Å–Ω—ã–π)
- **–ù–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —Ä—É–ª–æ–Ω—ã:** –ñ–µ–ª—Ç—ã–π –±–ª–æ–∫ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è
- **–°—Ç–∞—Ç—É—Å—ã —Ä—É–ª–æ–Ω–æ–≤:** –ó–µ–ª–µ–Ω—ã–π (–ó–∞–≤–µ—Ä—à–µ–Ω) / –ñ–µ–ª—Ç—ã–π (–í —Ä–∞–±–æ—Ç–µ)
- **–ú–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Ä–∞—Å—Ö–æ–¥–∞ –Ω–∏—Ç–∏

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–æ—Ä–º —Ä–∞—Å—Ö–æ–¥–∞

–ù–æ—Ä–º—ã —Ä–∞—Å—Ö–æ–¥–∞ –Ω–∏—Ç–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `fabric_types`:

- `weft_consumption_per_meter` - —Ä–∞—Å—Ö–æ–¥ —É—Ç–∫–∞ –≤ –∫–≥ –Ω–∞ –º–µ—Ç—Ä —Ç–∫–∞–Ω–∏
- `warp_consumption_per_meter` - —Ä–∞—Å—Ö–æ–¥ –æ—Å–Ω–æ–≤—ã –≤ –∫–≥ –Ω–∞ –º–µ—Ç—Ä —Ç–∫–∞–Ω–∏

**–ü—Ä–∏–º–µ—Ä:**
- –¢–∫–∞–Ω—å 105 —Å–º —à–∏—Ä–∏–Ω–æ–π
- –†–∞—Å—Ö–æ–¥ —É—Ç–∫–∞: 85 –≥/–º ‚Üí `0.085`
- –†–∞—Å—Ö–æ–¥ –æ—Å–Ω–æ–≤—ã: 65 –≥/–º ‚Üí `0.065`
- –ü—Ä–∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ 100 –º:
  - –£—Ç–æ–∫: 100 √ó 0.085 = 8.5 –∫–≥
  - –û—Å–Ω–æ–≤–∞: 100 √ó 0.065 = 6.5 –∫–≥

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ö–æ–¥—ã –Ω–∏—Ç–∏ –¥–æ–ª–∂–Ω—ã —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å** –≤ —Ç–∞–±–ª–∏—Ü–µ `yarn_types`
2. **–ü–∞—Ä—Ç–∏–∏ –Ω–∏—Ç–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è** –∏–∑ –º–æ–¥—É–ª—è —ç–∫—Å—Ç—Ä—É–∑–∏–∏
3. **–†—É–ª–æ–Ω—ã –≤ —Ä–∞–±–æ—Ç–µ** –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `previous_doc_id`
4. **–î–ª–∏–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –≤—Å–µ–≥–¥–∞** (–¥–ª—è KPI), –≤–µ—Å - —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —Ä—É–ª–æ–Ω–æ–≤
5. **–¶–µ–ø–æ—á–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä—É–ª–æ–Ω–∞

---

## üìù TODO –¥–ª—è —É–ª—É—á—à–µ–Ω–∏–π

- [ ] –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–µ–Ω—å–µ (–∏–∑ AppScript)
- [ ] –î–∏–∞–≥—Ä–∞–º–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
- [ ] –û—Ç—á–µ—Ç—ã –ø–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º
- [ ] –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ (–±—Ä–∞–∫)

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –º–æ–¥—É–ª—å —Ç–∫–∞—á–µ—Å—Ç–≤–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ ERP —Å–∏—Å—Ç–µ–º—É –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ.
