-- ═══════════════════════════════════════════════════════════════════════════
-- МИГРАЦИЯ: Изменение типа поля role с ENUM на VARCHAR
-- ═══════════════════════════════════════════════════════════════════════════
-- Это позволит добавлять новые роли без миграций БД
-- ═══════════════════════════════════════════════════════════════════════════

-- 1. Изменяем тип колонки role на VARCHAR
ALTER TABLE employees
  ALTER COLUMN role TYPE VARCHAR(100) USING role::text;

-- 2. Опционально: Удаляем старый ENUM (если он больше не используется в других таблицах)
-- ВАЖНО: Раскомментируйте следующую строку только если уверены, что ENUM нигде больше не используется
-- DROP TYPE IF EXISTS employee_role CASCADE;

-- 3. Добавляем комментарий
COMMENT ON COLUMN employees.role IS 'Роль сотрудника (свободный текст): admin, manager_warehouse, operator_extruder, operator_winder, operator_weaver, operator_lamination, operator_cutting, operator_sewing';

-- 4. Проверка - показываем все роли
SELECT DISTINCT role FROM employees ORDER BY role;

-- ═══════════════════════════════════════════════════════════════════════════
-- ГОТОВО!
-- ═══════════════════════════════════════════════════════════════════════════
-- Теперь вы можете добавлять любые роли через интерфейс администрирования
-- без необходимости изменять схему базы данных.
-- ═══════════════════════════════════════════════════════════════════════════
